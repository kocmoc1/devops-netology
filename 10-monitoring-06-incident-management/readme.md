# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

Краткое описание: Из за проведения регламентных работа кратковремено было потеряно соединения между узлами кластера MySql. Каждый узел кластера попытался восстановить кластер и перенаправил трафик каждый на себя, вследствии чего произошла рассинхранизация базы данных.

Предшествующие события: Замена сетевогого оборудования одного из дата-центров.

Причина инцидента: Изза потери связи между нодами кластера на каждой из нод начался процесс выбора лидера.

Воздействие: Появление непоследовательной информации на веб-сайте

Обнаружение: В 23:02 инженеры заметили не штатное сотосяние топологии кластера баз данных.

Реакция: Ручная блокировка для предотвращения бОльших последствий рассинхронизации кластера. Проработка плана по решению  данного инцедента. 

Восстановление: Восстановление БД из резервной копии, синхронизация данных всех нод. Ручное восстановление "недостающих" данных.

Таймлайн: 
  2018 October 21 22:52 UTC - Оркестратор кластера начал процедуру выбора либера кластера
  2018 October 21 22:54 UTC - Система мониторинга начала сиглализировать о проблемах в класетере
  2018 October 21 23:02 UTC - Инженеры первой линии поддержки определили что кластер находится в не "стандартном" состоянии.
  2018 October 21 23:07 UTC - группа реагирования принимает решение врачную заблокировать установку обновлений. 
  2018 October 21 23:09 UTC - группа реагирования переводит сайт в "желтый" статус.
  2018 October 21 23:13 UTC - определено что проблема повлияла на несколько кластеров. Подключены дополнительные инженеры для решения проблемы.
  2018 October 21 23:19 UTC - частичное отключений функционала сайта для предотвращениия записи метаданных в кластер.
  2018 October 22 00:05 UTC - начата разработка плана по восстановлению работоспобности кластера.
  2018 October 22 00:41 UTC - начато восстановление из резервной копии.
  2018 October 22 06:51 UTC - Несколько кластеров в ДЦ East Coast успешно восстановлены, начата процедура репликации данных из ДЦ West Coast.
  2018 October 22 07:46 UTC - публикации информации для посетителей сайта.
  2018 October 22 11:12 UTC - Все БД в ДЦ East Coast восстановлены.
  2018 October 22 13:15 UTC - зафиксированы пиковые нагрузки трафика на сайт.
  2018 October 22 16:24 UTC - Восстановление кластера к "стандартной" топологии.
  2018 October 22 16:45 UTC - начат разбор уведомлений пришедших за время "простоя".
  2018 October 22 23:03 UTC - все уведомления обработаны.

Последующие действия: Изменеие насроек оркестратора кластера для предотвращения миграции данных за пределы датацентров в регионе, переход на новый механизм отчетов для ускорения процесса приниятия решения



